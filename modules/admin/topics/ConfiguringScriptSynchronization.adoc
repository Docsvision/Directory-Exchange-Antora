= Настройка сценария синхронизации

Сценарий синхронизации содержит информацию о том, какие карточки и секции должны синхронизироваться, какие сервера включены в процесс синхронизации, по какому сценарию производится фоновая синхронизация.

В зависимости от требований организации может быть настроено несколько сценариев синхронизации. Например, может быть настроена синхронизация одного набора данных с двумя удалёнными серверами {dv} – для первого с периодичностью в 1 минуту, а для второго – раз в сутки.

Настройка сценариев синхронизации производится в "Консоли настроек репликации справочников {dv}". Настройка возможна только после xref:SetCurrentServerDatabase{dv}.adoc[указания текущего сервера {dv}].

Для настройки нового сценария:

. Запустите программу "Консоль настроек репликации справочников {dv}" из меню Пуск от имени локального администратора.
. Выберите профиль подключения, для которого выполняется настройка, и нажмите кнопку *Подключиться*. Будет открыто окно со списком сценариев синхронизации.
+
image::scenariosEmpty.png[Сценарии синхронизации]
. Нажмите кнопку *Добавить сценарий*. Будет предложено ввести название нового сценария синхронизации.
. Введите название и нажмите *ОК*.
+
image::scenarioName.png[Добавление нового сценария]
+
Будет открыто окно редактирования сценария.

image::scenarioConfig.png[Параметры сценария обмена]
. Установите флаг *Требуется полная инициализация*.
+
При установленном флаге при первой синхронизации на удалённые сервера будут переданы все карточки или все строки справочников, отмеченных для синхронизации. При последующих синхронизация будут передаваться только изменения, если не был изменён список синхронизируемых данных – в этом случае (единожды) будет передан полный набор данных.
+
Полная синхронизация типа карточки или секции выполняется также в том случая, если с момента предыдущей синхронизации прошло времени больше, чем срок, указанный в параметрах отслеживания изменений (по умолчанию 2 дня).
+
Флаг *Требуется полная инициализация* рекомендуется устанавливать для главного сервера.
. Настройте сценарий:
[loweralpha]
.. xref:TuningCompositionSynchronizedData.adoc[Выберите синхронизируемые данные].
.. xref:ConfiguringSynchronizedServers.adoc[Выберите сервера {dv}, на которые будут загружаться изменения].
.. xref:ScheduleSetupExchange.adoc[Настройте расписание фоновой синхронизации].
. Нажмите кнопку *Сохранить*. Сценарий будет добавлен в список сценариев.
+
image::scenariosWithData.png[Сценарии синхронизации]
+
Расписания всех сценариев отображаются на странице "Расписание обмена".
+
image::scenariosSchedule.png[Расписание сценариев синхронизации]
. Выберите добавленный сценарий в списке и нажмите кнопку *Активировать*. Справа от строки сценария будет установлен флаг "Активность".
. Аналогичным образом настройте другие сценарии синхронизации.
. Нажмите кнопку *Выполнить обмен вручную* для запуска процесса синхронизации.
+
Первую синхронизацию рекомендуется выполнять вручную.
. После завершения настройки сценариев нажмите кнопку *Перезапустить сервис*. Сервис репликации справочников будет перезапущен.
+
Сервис репликации нужно перезапускать после каждого изменения сценариев синхронизации.

* xref:TuningCompositionSynchronizedData.adoc[Настройка состава синхронизируемых данных]
* xref:ConfiguringSynchronizedServers.adoc[Настройка синхронизируемых серверов]
* xref:ScheduleSetupExchange.adoc[Настройка расписания фоновой синхронизации]
